# loaded as part of the main bundle of javascript

window.require = {
  paths: {
<%=
  javascripts = {}
  # read all the assets
  Rails.application.assets.each_file do |path|
    attributes = Rails.application.assets.attributes_for(path)
    # if it's a javascript file
    if attributes.content_type == "application/javascript"
      # load the requirement path
      basic_path = attributes.logical_path
      basic_path.gsub(/#{attributes.format_extension}$/, "")
      # calculate the full path
      full_path = asset_path("#{basic_path}#{attributes.format_extension}")
      full_path.gsub!(/#{attributes.format_extension}$/, "")
      # merge into the hash
      javascripts.merge!({ basic_path => full_path })
    end
  end
  # output as a JSON hash
  javascripts.map { |k,v| %Q(    "#{k}": "#{v}") }.join("\n")
%>
  }
}

window.ClientSideValidations ||= {}
window.ClientSideValidations.forms ||= {}
window.ClientSideValidations.selectors ||= {}